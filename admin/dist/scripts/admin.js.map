{"version":3,"sources":["../assets/scripts/admin/upload.js","../assets/scripts/admin.js"],"names":["jQuery","document","ready","$","on","row","this","parent","find","clone","addClass","insertAfter","remove","_custom_media","_orig_send_attachment","wp","media","editor","send","attachment","click","e","button","props","val","url","apply","open","modal","parents","tabContainer","siblings","hide","attr","show","removeClass"],"mappings":"AAAAA,OAAAC,UAAAC,MAAA,SAAAC,GAKAA,EAAA,YAAAC,GAAA,QAAA,WACA,GAAAC,GAAAF,EAAAG,MAAAC,SAAAC,KAAA,cAAAC,OAAA,EAGA,OAFAJ,GAAAK,SAAA,WACAL,EAAAM,YAAAR,EAAAG,MAAAC,SAAAC,KAAA,gBACA,IAIAL,EAAA,eAAAC,GAAA,QAAA,WAEA,MADAD,GAAAG,MAAAC,SAAAC,KAAA,cAAAI,UACA,GAOA,IAAAC,IAAA,EAAAC,EAAAC,GAAAC,MAAAC,OAAAC,KAAAC,UAEAhB,GAAA,wBAAAiB,MAAA,SAAAC,GACA,GACAC,IADAP,GAAAC,MAAAC,OAAAC,KAAAC,WACAhB,EAAAG,MAYA,OAXAO,IAAA,EACAE,GAAAC,MAAAC,OAAAC,KAAAC,WAAA,SAAAI,EAAAJ,GACA,MAAAN,OACAS,GAAAf,SAAAA,SAAAC,KAAA,oBAAAgB,IAAAL,EAAAM,KAEAX,EAAAY,MAAApB,MAAAiB,EACAJ,KAIAJ,GAAAC,MAAAC,OAAAU,KAAAL,IACA,IAGAnB,EAAA,cAAAC,GAAA,QAAA,WACAS,GAAA,MC1CAb,OAAAC,UAAAC,MAAA,SAAAC,GAKAA,EAAA,QAAAC,GAAA,QAAA,6BAAA,WACA,GAAAwB,GAAAzB,EAAAG,MAAAuB,QAAA,wBACAC,EAAA3B,EAAAG,MAAAuB,QAAA,0BACAC,GAAAC,WAAAC,OACAJ,EAAApB,KAAA,IAAAL,EAAAG,MAAA2B,KAAA,aAAAC,OACAJ,EAAAtB,KAAA,oBAAA2B,YAAA,UACAhC,EAAAG,MAAAI,SAAA,YAKAP,EAAA,QAAAC,GAAA,QAAA,mEAAA,SAAAiB,GACAlB,EAAAG,MAAA2B,KAAA,iBAAA","file":"admin.js","sourcesContent":["jQuery(document).ready(function ($) {\n\n    // ---------------------------------------------------------\n    // 添加更多, 用于重复字段\n    // ---------------------------------------------------------\n    $('.add-row').on('click', function () {\n        var row = $(this).parent().find('input:last').clone(true);\n        row.addClass('new-row');\n        row.insertAfter($(this).parent().find('input:last'));\n        return false;\n    });\n\n    // 移除添加的元素\n    $('.remove-row').on('click', function () {\n        $(this).parent().find('input:last').remove();\n        return false;\n    });\n\n\n    // ---------------------------------------------------------\n    // 文件上传, 目前插入 URL, 考虑做成插入 ID的方式, 方便获取缩略图\n    // ---------------------------------------------------------\n    var _custom_media = true, _orig_send_attachment = wp.media.editor.send.attachment;\n\n    $('.wizhi_upload_button').click(function (e) {\n        var send_attachment_bkp = wp.media.editor.send.attachment;\n        var button = $(this);\n        _custom_media = true;\n        wp.media.editor.send.attachment = function (props, attachment) {\n            if (_custom_media) {\n                button.parent().parent().find('input[type=text]').val(attachment.url);\n            } else {\n                return _orig_send_attachment.apply(this, [props,\n                    attachment]);\n            }\n        };\n\n        wp.media.editor.open(button);\n        return false;\n    });\n\n    $('.add_media').on('click', function () {\n        _custom_media = false;\n    });\n\n});\n","jQuery(document).ready(function ($) {\n\n    // ---------------------------------------------------------\n    // 选项卡\n    // ---------------------------------------------------------\n    $('body').on('click', '.wizhi_modal_tab[data-for]', function () {\n        var modal = $(this).parents('.mce-container:eq(0)');\n        var tabContainer = $(this).parents('.wizhi_modal_tabs:eq(0)');\n        tabContainer.siblings().hide();\n        modal.find('#' + $(this).attr('data-for')).show();\n        tabContainer.find('.wizhi_modal_tab').removeClass('active');\n        $(this).addClass('active');\n    });\n\n\n    // Change the data-shortcode to remove the click handler\n    $('body').on('hover', '.shortcode-list-item[data-shortcode=\"wizhi_get_more_shortcodes\"]', function (e) {\n        $(this).attr('data-shortcode', '__wizhi_get_more_shortcodes');\n    });\n\n    // ---------------------------------------------------------\n    // 结束功能\n    // ---------------------------------------------------------\n\n});\n"],"sourceRoot":"assets/scripts/"}